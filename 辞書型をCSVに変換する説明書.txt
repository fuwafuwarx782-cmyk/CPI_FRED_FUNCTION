format_for_s3_csv関数は、引数として
変数index_series（辞書型でキーは文字列、値は数値）とseries_name（文字列）を受け取る。

変数fieldnames（csvモジュールで慣例的に表の列の名前を示す一番上の行を扱う）に
リストとして文字列series_keyとobtain_dateとindex_valueを代入。

変数outputにioモジュールのStringIOクラスを代入。StingIOクラスは仮の保存領域のオブジェクトを作る。

変数writerにcsvモジュールのDictWriterクラスを代入。
DictWriterクラスはcsvファイルの形式を整えるクラス。
writerに代入してオブジェクトとし、メソッドを使えるようにしている。
DictWriterクラスの引数は（書き込み先のファイルオブジェクト、ヘッダー名のリスト、例外を出すかどうか）
extrasactionは、設定した形式に当てはまらないときに無視して飛ばすか、例外を出すか決める。

writerオブジェクトのwriteheaderメソッドで一番上の行を仮の保存領域に書き出し。

変数sorted_datesに代入、関数sortedでseriesオブジェクトkey関数でキーの順番を整える。
for文で並べなおしたキーを一つずつ順番に取り出して変数へ代入。
その変数を使って対応する値を順番に取り出す。一般的な3行

変数row（行）に、辞書型で一行ずつ要素をいれる。
upper()は大文字にするメソッド

writerオブジェクトのwriterowメソッドで引数rowを書き出し

returnでoutputオブジェクトの一時保存データをファイル化せずにテキストデータとして返す